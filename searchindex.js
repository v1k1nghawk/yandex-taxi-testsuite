Search.setIndex({"docnames": ["clickhouse", "databases", "examples/README", "examples/chat-backend/README", "examples/chat-storage-mongo/README", "examples/chat-storage-mysql/README", "examples/chat-storage-postgres/README", "examples/docker/README", "index", "intro", "license", "mockserver", "mysql", "other_plugins", "rabbitmq", "reference", "servicerunner", "staticfiles", "tcp_mockserver", "testpoint", "utils"], "filenames": ["clickhouse.rst", "databases.rst", "examples/README.rst", "examples/chat-backend/README.rst", "examples/chat-storage-mongo/README.rst", "examples/chat-storage-mysql/README.rst", "examples/chat-storage-postgres/README.rst", "examples/docker/README.rst", "index.rst", "intro.rst", "license.rst", "mockserver.rst", "mysql.rst", "other_plugins.rst", "rabbitmq.rst", "reference.rst", "servicerunner.rst", "staticfiles.rst", "tcp_mockserver.rst", "testpoint.rst", "utils.rst"], "titles": ["ClickHouse", "Database support", "Examples", "Chat backend example", "MongoDB chat storage backend example", "MySQL chat storage backend example", "PostgreSQL chat storage backend example", "Docker integration example", "testsuite: microservice testing framework", "Overview", "License", "Http mockserver", "MySQL", "Other plugins", "RabbitMQ", "API reference", "Spawning and accessing service", "Working with static files", "Tcp mockserver", "Testpoint", "Utils"], "terms": {"In": [0, 1, 12, 13, 14], "order": [0, 1, 5, 6, 9, 12, 14], "enabl": [0, 1, 9, 11, 12, 13, 14, 15, 19], "support": [0, 8, 11, 12, 14, 15, 19], "you": [0, 1, 2, 7, 9, 11, 12, 13, 14, 18], "have": [0, 1, 2, 12, 14], "add": [0, 1, 9, 12, 13, 14, 15], "testsuit": [0, 1, 2, 3, 4, 5, 6, 7, 11, 12, 13, 14, 15, 16, 17, 18], "pytest_plugin": [0, 1, 3, 4, 5, 6, 12, 13, 14, 15, 16], "list": [0, 1, 3, 6, 12, 14, 15], "your": [0, 1, 9, 11, 12, 14, 17], "conftest": [0, 1, 2, 12, 13, 14], "py": [0, 1, 2, 3, 4, 5, 6, 7, 12, 13, 14, 17], "file": [0, 1, 8, 10, 12, 15], "configur": [0, 1, 7, 11, 12], "schema": [0, 1, 5, 6, 7, 12], "locat": [0, 1, 12, 14, 17], "By": [0, 1, 11, 12, 14], "default": [0, 1, 3, 4, 5, 6, 7, 11, 12, 13, 14, 16, 17, 18], "start": [0, 1, 3, 4, 5, 6, 7, 9, 11, 12, 13, 14, 16], "servic": [0, 1, 2, 7, 8, 9, 11, 12, 13, 14, 15, 19], "thi": [0, 1, 3, 4, 5, 6, 10, 11, 12, 14, 15, 17], "case": [0, 1, 11, 12, 14, 17], "i": [0, 1, 3, 4, 5, 6, 7, 8, 10, 11, 12, 13, 14, 16, 17, 18, 19], "requir": [0, 1, 7, 9, 11, 12, 14, 19], "current": [0, 1, 11, 12, 13, 14, 17], "plugin": [0, 1, 7, 8, 12, 14, 15, 17, 18], "synchron": [0, 1, 12, 19, 20], "driver": [0, 1, 12, 14], "creat": [0, 1, 3, 4, 5, 6, 12, 16, 18], "onc": [0, 1, 11, 12], "And": [0, 1, 11, 12], "popul": [0, 1, 12], "data": [0, 1, 5, 6, 9, 11, 12, 17, 18, 19], "each": [0, 1, 9, 12, 20], "test": [0, 1, 7, 9, 11, 12, 13, 17, 18, 19], "It": [0, 1, 11, 12, 17, 18, 19], "look": [0, 1, 9, 12], "follow": [0, 1, 9, 10, 12, 17], "name": [0, 1, 3, 4, 11, 12, 17, 19], "ch_dbname": [0, 1], "sql": [0, 1, 12], "directori": [0, 1, 2, 12, 17], "For": [0, 1, 2, 9], "debian": [0, 1], "pleas": [0, 1, 9, 14], "run": [0, 1, 7, 8, 11, 19], "command": [0, 1, 7, 11, 12, 13], "sudo": [0, 1], "apt": [0, 1, 7], "updat": [0, 1, 7], "common": [0, 15, 17], "static": [0, 1, 3, 8, 15], "http": [0, 1, 2, 3, 4, 5, 6, 8, 9, 14, 15, 16, 19], "com": [0, 1, 9, 14], "doc": [0, 1, 4, 7, 9, 14], "en": [0, 1], "get": [0, 1, 3, 4, 5, 6, 7, 11], "packag": [0, 1, 17], "maco": [0, 1, 9], "instruct": [0, 1], "from": [0, 1, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 14, 19], "binari": [0, 1, 7, 9, 11, 16], "non": [0, 1], "linux": [0, 1, 9], "If": [0, 1, 11, 13, 14, 17], "alreadi": [0, 1, 14], "symlink": [0, 1], "usr": [0, 1, 7, 14], "bin": [0, 1, 7], "mai": [0, 1, 9, 12, 14], "testsuite_clickhouse_server_tcp_port": [0, 1], "testsuite_clickhouse_server_http_port": [0, 1], "environ": [0, 1, 7, 9, 12, 14], "variabl": [0, 1, 12, 14], "ar": [0, 1, 2, 4, 11, 14, 18], "specifi": [0, 1, 11, 12, 13, 14], "usag": 0, "now": [0, 1, 11, 13, 14], "import": [0, 1, 3, 4, 5, 6, 12, 16, 18], "discov": [0, 1, 5, 6, 12], "scope": [0, 1, 3, 4, 5, 6, 12, 16, 17, 18], "session": [0, 3, 4, 5, 6, 11, 12, 16, 17, 18], "def": [0, 1, 3, 4, 5, 6, 11, 12, 14, 16, 17, 18, 19, 20], "return": [0, 1, 3, 4, 5, 6, 11, 12, 16, 17, 18, 20], "schemas_dir": [0, 1, 12], "test_read_from_databas": [0, 1, 12], "connect": [0, 1, 4, 5, 6, 10, 18], "chat_messag": [0, 1, 5, 6, 7, 12], "result": [0, 1, 3, 9], "execut": [0, 1, 3, 4, 5, 6, 12], "select": [0, 1, 5, 6, 7, 12], "system": [0, 1, 2, 8], "number": [0, 1], "limit": [0, 1, 4, 5, 6, 10], "5": [0, 1, 7], "assert": [0, 1, 3, 4, 5, 6, 9, 11, 12, 14, 18, 19], "0": [0, 1, 2, 5, 6, 7, 18, 19], "1": [0, 1, 3, 5, 6, 7, 11, 14, 19, 20], "2": [0, 1, 5, 6, 7, 20], "3": [0, 1], "4": [0, 1], "dbname": [0, 1, 5, 12], "queri": [0, 1, 11, 12], "extra": [0, 1, 12, 18], "per": [0, 1, 11, 12, 17, 18], "manner": [0, 1, 12], "paramet": [0, 1, 12, 18], "filenam": [0, 1, 12, 17], "appli": [0, 1, 12], "can": [1, 2, 9, 11, 12, 13, 17, 18], "stop": 1, "process": [1, 3, 4, 5, 6, 9, 11, 16, 19], "exist": 1, "clear": 1, "befor": [1, 9], "ensur": [1, 11], "known": 1, "state": [1, 9, 19], "load": 1, "via": 1, "staatic": 1, "see": [1, 2, 9, 14, 17], "work": [1, 8, 12, 14, 15], "disabl": 1, "ordrer": 1, "collect": [1, 4], "shard": 1, "cluster": 1, "testsuite_mongo_config_server_port": 1, "testsuite_mongos_port": 1, "testsuite_mongo_shard_port": 1, "forc": [1, 12], "own": [1, 9, 11, 12], "line": [1, 11, 12, 13], "option": [1, 3, 4, 5, 6, 11, 12, 14, 16], "host": [1, 5, 7, 18, 19], "re": 1, "fill": [1, 9, 11], "whole": 1, "db_collection_nam": 1, "json": [1, 3, 4, 5, 6, 11, 19], "pattern": 1, "found": [1, 17], "empti": 1, "pymongo": [1, 4], "mongo_collect": [1, 4], "example_collect": 1, "set": [1, 4, 9, 13, 14], "example_db": 1, "index": [1, 4, 8], "mongodb_set": [1, 4], "prefix": 1, "suffix": 1, "map": 1, "e": [1, 7, 9, 11, 17], "g": [1, 9, 11, 17], "db_collection_name_foo": 1, "collection_nam": 1, "foo": [1, 5, 6, 12, 17, 19], "test_foo": [1, 17], "postgr": [1, 2, 7], "pgsql_plugin": 1, "psycopg2": 1, "pg_dbname": 1, "testsuite_postgresql_port": 1, "db": [1, 5, 7], "gener": [1, 16], "doe": 1, "except": [1, 11], "when": [1, 9, 11, 13, 16], "keep": 1, "runner": [1, 13], "mode": [1, 13], "flag": [1, 11, 13], "wait": 1, "indefinit": 1, "so": [1, 4, 10, 18], "develop": [1, 11, 13], "attach": 1, "debugg": 1, "one": [1, 9], "next": 1, "skip": 1, "initi": [1, 17], "unless": [1, 11], "were": [1, 9], "modifi": [1, 10, 13], "sinc": 1, "tests_dir": 1, "pathlib": [1, 3, 4, 5, 6, 17], "path": [1, 3, 4, 5, 6, 7, 11, 16, 17, 19], "__file__": [1, 3, 4, 5, 6, 17], "parent": [1, 3, 4, 5, 6], "sqldata_path": 1, "joinpath": [1, 3, 4, 5, 6, 17], "service_nam": 1, "valu": [1, 5, 6, 11, 13, 19], "cursor": [1, 5, 6, 12], "usernam": [1, 3, 4, 5, 6, 12], "text": [1, 3, 4, 5, 6, 12], "messag": [1, 2, 3, 4, 5, 6, 12, 14], "where": [1, 5, 6, 12], "id": [1, 4, 5, 6, 11, 12], "": [1, 3, 4, 5, 6, 9, 11, 12], "record": [1, 5, 6, 12], "fetchon": [1, 5, 6, 12], "bar": [1, 5, 6, 12, 19], "overrid": 1, "mariadb": [1, 9, 12], "10": [1, 3, 4, 5, 6, 7, 9, 12], "should": [1, 11, 12], "well": [1, 9, 12], "pymysql": [1, 12], "my_dbnam": [1, 12], "testsuite_mysql_port": [1, 12], "user": [1, 5, 12], "password": [1, 12], "hostnam": [1, 5, 12, 13, 18], "provid": [1, 2, 10, 13, 17, 18], "basic": 1, "testsuite_redis_master_port": 1, "must": [1, 16, 19], "two": [1, 2], "comma": 1, "separ": [1, 9], "integ": 1, "testsuite_redis_sentinel_port": 1, "testsuite_redis_slave_port": 1, "three": 1, "async": [1, 3, 4, 5, 6, 11, 14, 16, 18, 19, 20], "aio": [1, 14], "pika": [1, 14], "consult": [1, 14], "offici": [1, 14], "www": [1, 14], "download": [1, 14], "html": [1, 2, 3, 14], "its": [1, 9, 11, 14], "differ": [1, 14], "lib": [1, 14], "testsuite_rabbitmq_bindir": [1, 14], "accordingli": [1, 14], "testsuite_rabbitmq_tcp_port": [1, 14], "testsuite_rabbitmq_epmd_port": [1, 14], "local": [1, 14], "try": [1, 14], "test_rabbitmq_bas": [1, 14], "exchang": [1, 14], "testsuite_exchang": [1, 14], "queue": [1, 14, 20], "testsuite_queu": [1, 14], "routing_kei": [1, 14], "testsuite_routing_kei": [1, 14], "channel": [1, 14], "await": [1, 3, 4, 5, 6, 11, 14, 16, 18, 19, 20], "get_channel": [1, 14], "declare_exchang": [1, 14], "exchange_typ": [1, 14], "fanout": [1, 14], "declare_queu": [1, 14], "bind_queu": [1, 14], "publish": [1, 10, 14], "bodi": [1, 3, 4, 11, 14], "b": [1, 14, 18, 20], "hi": [1, 3, 4, 14], "consum": [1, 14], "count": [1, 14], "here": [2, 7, 9], "we": 2, "demonstr": 2, "how": 2, "us": [2, 9, 10, 11, 13, 16, 17, 18, 19], "base": [2, 4, 9, 13, 15, 18], "simpl": [2, 11, 18, 19], "chat": [2, 7], "The": [2, 9, 10], "frontend": 2, "backend": [2, 7], "interact": [2, 18], "written": [2, 9], "python": [2, 7, 9], "commun": 2, "an": [2, 3, 7, 9, 10, 11, 18], "extern": [2, 3, 9, 11], "storag": [2, 3, 7], "actual": [2, 11], "store": [2, 3, 20], "altern": 2, "implement": [2, 16, 18, 19], "mongo": [2, 4, 7, 9, 15], "mongodb": [2, 7, 9], "databas": [2, 4, 5, 6, 8, 15], "mysql": [2, 7, 9, 15], "postgresql": [2, 7, 9, 15], "structur": 2, "xxx": 2, "server": [2, 3, 4, 5, 6, 7, 9, 11, 18], "microservic": [2, 9], "pytest": [2, 3, 4, 5, 6, 9, 11, 13, 14, 15, 16, 17, 18], "all": [2, 7, 10, 11], "make": [2, 9, 11], "runtest": [2, 7], "particular": [2, 10, 13], "conveni": 2, "integr": [2, 3, 5, 6], "To": [2, 11, 13], "need": [2, 7], "compos": 2, "instal": [2, 7, 8, 11, 12], "On": 2, "startup": 2, "complet": [2, 11], "output": 2, "similar": 2, "postgres_1": 2, "8081": 2, "press": 2, "ctrl": 2, "c": [2, 9, 10], "quit": 2, "open": [2, 9], "abov": [2, 10], "url": [2, 3, 16], "browser": 2, "dockerfil": 2, "yaml": 2, "task": [3, 11], "deleg": 3, "argpars": [3, 4, 5, 6], "aiohttp": [3, 4, 5, 6, 11], "web": [3, 4, 5, 6, 9, 11], "http_timeout": [3, 4, 5, 6], "main": [3, 4, 5, 6], "parser": [3, 4, 5, 6], "argumentpars": [3, 4, 5, 6], "descript": [3, 4, 5, 6], "add_argu": [3, 4, 5, 6], "help": [3, 4, 5, 6], "respons": [3, 4, 5, 6, 11, 19], "port": [3, 4, 5, 6, 7, 18], "type": [3, 4, 5, 6, 11, 19], "int": [3, 4, 5, 6], "8080": [3, 4, 5, 6, 7, 16], "arg": [3, 4, 5, 6, 13, 15, 16], "parse_arg": [3, 4, 5, 6], "storage_service_url": 3, "rout": [3, 4, 5, 6], "routetabledef": [3, 4, 5, 6], "root": [3, 4, 5, 6, 7], "ping": [3, 4, 5, 6, 16], "handle_p": [3, 4, 5, 6], "request": [3, 4, 5, 6, 9, 11, 19], "ok": [3, 4, 5, 6, 16], "post": [3, 4, 5, 6, 11, 19], "retriev": [3, 4, 5, 6, 13], "handle_list": 3, "clientsess": 3, "timeout": [3, 7, 15], "raise_for_statu": 3, "response_bodi": 3, "revers": 3, "json_respons": [3, 4, 5, 6], "send": [3, 4, 5, 6], "handle_send": 3, "statu": [3, 11, 13], "204": 3, "handle_root": 3, "filerespons": 3, "app": [3, 4, 5, 6], "applic": [3, 4, 5, 6], "add_rout": [3, 4, 5, 6], "run_app": [3, 4, 5, 6], "__name__": [3, 4, 5, 6], "__main__": [3, 4, 5, 6], "sy": [3, 4, 5, 6], "pytest_addopt": [3, 4, 5, 6, 7], "group": [3, 4, 5, 6], "getgroup": [3, 4, 5, 6], "addopt": [3, 4, 5, 6], "bind": [3, 4, 5, 6, 18], "fixtur": [3, 4, 5, 6, 15], "example_servic": [3, 4, 5, 6], "ensure_daemon_start": [3, 4, 5, 6], "holder": [3, 4, 5, 6, 10], "example_service_scop": [3, 4, 5, 6], "depend": [3, 4, 5, 6], "mockserv": [3, 4, 5, 6, 8, 9, 15, 16, 19], "yet": [3, 4, 5, 6, 16], "example_cli": [3, 4, 5, 6], "create_service_cli": [3, 4, 5, 6], "example_service_baseurl": [3, 4, 5, 6], "client": [3, 4, 5, 6, 7, 11, 16, 19], "instanc": [3, 4, 5, 6, 11, 16, 17, 18], "pytestconfig": [3, 4, 5, 6], "f": [3, 4, 5, 6], "localhost": [3, 4, 5, 6, 16, 18], "example_service_port": [3, 4, 5, 6], "example_root": [3, 4, 5, 6], "create_daemon_scop": [3, 4, 5, 6], "mockserver_info": 3, "str": [3, 4, 5, 6], "base_url": 3, "ping_url": [3, 4, 5, 6, 16], "yield": [3, 4, 5, 6, 16, 18], "test_messages_send": [3, 4, 5, 6], "handler": [3, 11], "bob": [3, 4], "hello": [3, 5, 6, 18], "my": [3, 4], "make_respons": 3, "times_cal": [3, 11, 19, 20], "test_messages_retriev": [3, 4, 5, 6], "2020": [3, 4, 10], "01": [3, 4, 5, 6], "01t12": [3, 4, 13], "00": [3, 4, 5, 6, 13], "000": 3, "alic": [3, 4], "date": 3, "02": [3, 4], "json_handl": [3, 11], "handle_retriev": 3, "200": [3, 4, 5, 6, 11, 16, 19], "uuid": 4, "motor": 4, "motor_asyncio": 4, "uri": [4, 7], "27017": 4, "create_app": [4, 5, 6], "asynciomotorcli": 4, "mongo_uri": 4, "chat_db": 4, "doc_id": 4, "uuid4": 4, "hex": 4, "update_on": 4, "_id": 4, "currentd": 4, "true": [4, 11, 13, 20], "upsert": 4, "find": 4, "sort": 4, "descend": 4, "20": [4, 5, 6, 7], "to_list": 4, "isoformat": [4, 5, 6], "kei": 4, "mongo_connection_info": 4, "get_uri": [4, 6], "rabbit": 4, "cute": 4, "love": 4, "them": 4, "_": [4, 18], "status_cod": [4, 5, 6, 11, 19], "msg_id": 4, "read": [4, 9, 18], "directli": [4, 9], "stored_messag": 4, "find_on": 4, "pop": 4, "db_messag": 4, "read_respons": 4, "aiomysql": 5, "3306": 5, "pool": [5, 6], "acquir": [5, 6], "insert": [5, 6], "INTO": [5, 6], "commit": [5, 13], "lastrowid": 5, "BY": [5, 6], "desc": [5, 6], "fetchal": 5, "create_pool": [5, 6], "mysql_host": 5, "mysql_port": 5, "mysql_us": 5, "mysql_dbnam": 5, "on_shutdown": 5, "append": 5, "close": [5, 18], "wait_clos": 5, "mysql_loc": 5, "mysql_conninfo": 5, "find_schema": [5, 6], "2019": [5, 6], "12": [5, 6, 13], "31t21": [5, 6], "happi": [5, 6], "ny": [5, 6], "world": [5, 6, 18], "asyncpg": 6, "string": [6, 11], "row_id": 6, "fetchval": 6, "fetch": 6, "dsn": 6, "pgsql": 6, "pgsql_local": 6, "pgsql_local_cr": 6, "chat_storage_postgr": 6, "first": 7, "build": 7, "imag": 7, "ubuntu": 7, "04": 7, "y": 7, "python3": [7, 13], "8": 7, "virtualenv": 7, "clean": 7, "mkdir": [7, 9], "p": [7, 9], "opt": 7, "yandex": [7, 9, 10], "m": [7, 13], "tmp": 7, "earli": 7, "copi": [7, 10], "setup": [7, 9, 11], "cfg": 7, "pip": [7, 9], "txt": [7, 17], "r": 7, "Then": [7, 11], "eniron": 7, "version": 7, "11": 7, "postgres_host_auth_method": 7, "trust": 7, "postgres_us": 7, "postgres_password": 7, "healthcheck": 7, "cmd": 7, "shell": 7, "pg_isreadi": 7, "u": 7, "interv": 7, "retri": 7, "7": 7, "authent": 7, "mysql_native_password": 7, "mysql_allow_empty_password": 7, "ye": 7, "uroot": 7, "extend": 7, "volum": 7, "entrypoint": 7, "initdb": 7, "d": 7, "testsuite_allow_root": 7, "working_dir": 7, "depends_on": 7, "condit": [7, 10, 19], "service_healthi": 7, "link": 7, "expos": 7, "overview": 8, "what": [8, 11], "oper": 8, "principl": 8, "sourc": [8, 17], "code": [8, 11, 19], "document": [8, 10], "api": [8, 11], "refer": 8, "spawn": [8, 15], "access": [8, 9, 15, 17], "testpoint": [8, 9, 15], "other": [8, 9, 10, 15], "util": [8, 11, 15], "tcp": [8, 15], "exampl": [8, 9, 11, 15, 17, 19], "docker": [8, 13], "licens": 8, "modul": 8, "search": [8, 17], "page": 8, "orient": 9, "framework": 9, "taxi": 9, "princip": 9, "suggest": 9, "approach": 9, "although": 9, "onli": [9, 11], "black": 9, "box": 9, "through": 9, "call": [9, 11, 13, 19, 20], "direct": 9, "write": [9, 18], "precondit": 9, "pip3": 9, "redi": [9, 15], "clickhous": [9, 15], "rabbitmq": [9, 15], "also": [9, 11], "includ": [9, 10], "project": 9, "submodul": 9, "git": [9, 13], "github": 9, "out": [9, 10], "gnu": 9, "up": [9, 16], "being": [9, 16, 19], "ani": [9, 10, 11], "which": [9, 11, 13], "mimic": 9, "mock": [9, 11, 13], "than": 9, "A": [9, 10], "perform": [9, 11], "verifi": 9, "properli": 9, "check": 9, "whether": [9, 10, 11], "ha": [9, 13, 19], "made": 9, "wa": [9, 11], "sent": 9, "receiv": [9, 11], "intern": [9, 11], "repres": 9, "mechan": 9, "edit": 9, "avail": [9, 11], "full": 9, "tutori": 9, "io": 9, "self": 9, "pytest3": 9, "cd": 9, "mit": 10, "copyright": 10, "2022": 10, "llc": 10, "permiss": 10, "herebi": 10, "grant": 10, "free": 10, "charg": 10, "person": 10, "obtain": 10, "softwar": 10, "associ": [10, 17], "deal": 10, "without": 10, "restrict": 10, "right": 10, "merg": 10, "distribut": [10, 11], "sublicens": 10, "sell": 10, "permit": 10, "whom": 10, "furnish": 10, "do": 10, "subject": 10, "notic": 10, "shall": 10, "substanti": 10, "portion": 10, "THE": 10, "AS": 10, "warranti": 10, "OF": 10, "kind": 10, "express": 10, "OR": 10, "impli": 10, "BUT": 10, "NOT": 10, "TO": 10, "merchant": 10, "fit": 10, "FOR": 10, "purpos": 10, "AND": 10, "noninfring": 10, "IN": 10, "NO": 10, "event": 10, "author": 10, "BE": 10, "liabl": 10, "claim": 10, "damag": 10, "liabil": 10, "action": 10, "contract": 10, "tort": 10, "otherwis": 10, "aris": 10, "WITH": 10, "insid": 11, "pass": [11, 18, 19], "address": 11, "500": 11, "fail": 11, "behaviour": 11, "could": 11, "switch": 11, "off": [11, 13], "nofail": 11, "test_mockserv": 11, "service_cli": 11, "header": [11, 13, 16], "reutrn": 11, "baserequest": 11, "object": 11, "special": [11, 16], "argument": 11, "body_json": 11, "method": 11, "mean": 11, "body_binari": 11, "content_typ": 11, "content": [11, 19], "cooki": 11, "dictionari": 11, "form": 11, "emul": 11, "while": 11, "x": [11, 13], "featur": 11, "turn": [11, 13], "product": 11, "respon": [11, 19], "599": 11, "specif": 11, "rais": [11, 17], "correspond": 11, "side": [11, 19], "httpclient": 11, "const": [11, 19], "auto": [11, 19], "performrequest": 11, "hashead": 11, "testsuite_error": 11, "gethead": 11, "throw": 11, "networkerror": 11, "timeouterror": 11, "std": 11, "runtime_error": 11, "unhandl": 11, "testcas": [11, 19], "test_timeout": 11, "handl": [11, 19], "mockserverfixtur": 11, "fast": 11, "begin": 11, "consid": 11, "testa": 11, "background": 11, "period": 11, "suppos": 11, "continu": 11, "after": 11, "observ": 11, "caus": 11, "anoth": 11, "testb": 11, "recal": 11, "happen": 11, "coincident": 11, "choic": 11, "global": 11, "undesir": 11, "becaus": 11, "some": [11, 13], "warn": 11, "anymor": 11, "he": 11, "forget": 11, "As": 11, "long": 11, "like": [11, 18], "trace": 11, "good": 11, "solut": 11, "problem": 11, "unmock": 11, "take": 11, "advantag": 11, "tell": 11, "termin": 11, "usual": 11, "unrel": 11, "act": 11, "respond": 11, "proce": 11, "normal": 11, "ini": [11, 13], "traceid": 11, "span": 11, "spanid": 11, "detail": 13, "report": 13, "vv": 13, "machin": 13, "branch": 13, "current_branch": 13, "commit_hash": 13, "base_commit_hash": 13, "section": 13, "indic": 13, "uncommit": 13, "chang": 13, "point": 13, "diverg": 13, "slow": 13, "due": 13, "network": [13, 15], "relat": [13, 17], "issu": 13, "affect": 13, "control": 13, "over": 13, "time": 13, "central": 13, "wai": [13, 19], "fals": 13, "explicitli": 13, "mark": [13, 15], "2016": 13, "datetim": 13, "utcnow": 13, "until": 13, "sleep": 13, "magic": 15, "error": [15, 19], "opentrac": 15, "class": 15, "envinfo": 15, "mocked_tim": 15, "asynccallqueu": 15, "tests": 16, "service_baseurl": 16, "server_cli": 16, "service_daemon": 16, "config": 16, "service_config_path": 16, "generate_service_config": 16, "contain": 16, "defin": 16, "daemon": 16, "createserviceclientfixtur": 16, "createdaemonscop": 16, "spawner": 16, "function": [17, 20], "testscas": 17, "directoi": 17, "rel": 17, "test_case_nam": 17, "dir": 17, "Not": 17, "filenotfounderror": 17, "would": 17, "loadfixtur": 17, "loadbinaryfixtur": 17, "loadjsonfixtur": 17, "loadyamlfixtur": 17, "openfilefixtur": 17, "getfilepathfixtur": 17, "getdirectorypathfixtur": 17, "getsearchpathesfixtur": 17, "given": 17, "my_data": 17, "get_source_directori": 17, "read_text": 17, "facil": 18, "custom": 18, "ip": 18, "asyncio": 18, "streamreaderprotocol": 18, "undercov": 18, "reader": 18, "writer": 18, "just": 18, "regular": 18, "loop": 18, "create_serv": 18, "contextlib": 18, "_tcp_mockserv": 18, "bound": [18, 19], "random": 18, "tcp_mockserv": 18, "interfac": [18, 19], "handle_cli": 18, "drain": 18, "client_handl": 18, "tcp_mockserver_connect": 18, "open_connect": 18, "test_serv": 18, "sock": 18, "none": 18, "kwarg": 18, "socket": 18, "instead": 18, "pair": 18, "param": 18, "testst": 19, "mani": 19, "reproduc": 19, "race": 19, "vice": 19, "versa": 19, "inject": 19, "With": 19, "mockerv": 19, "appic": 19, "view": 19, "isen": 19, "test_handl": 19, "foo_handl": 19, "callqueu": 20, "wrapper": 20, "inform": 20, "about": 20, "callinfo": 20, "acallqueu": 20, "func": 20, "has_cal": 20, "next_cal": 20}, "objects": {"pytest.mark": [[1, 0, 1, "", "nofilldb"]], "testsuite.daemons.pytest_plugin": [[16, 0, 1, "", "create_daemon_scope"], [16, 0, 1, "", "create_service_client"]], "testsuite.databases.mongo.pytest_plugin.pytest.mark": [[1, 0, 1, "", "filldb"]], "testsuite.databases.pgsql.pytest_plugin.pytest.mark": [[1, 0, 1, "", "pgsql"]], "testsuite.plugins.common": [[17, 0, 1, "", "get_directory_path"], [17, 0, 1, "", "get_file_path"], [17, 0, 1, "", "get_search_pathes"], [17, 0, 1, "", "load"], [17, 0, 1, "", "load_binary"], [17, 0, 1, "", "load_json"], [17, 0, 1, "", "load_yaml"], [17, 0, 1, "", "open_file"], [17, 0, 1, "", "testsuite_get_source_directory"], [17, 0, 1, "", "testsuite_get_source_path"]], "testsuite.plugins.tcp_mockserver": [[18, 0, 1, "", "create_tcp_mockserver"]]}, "objtypes": {"0": "py:function"}, "objnames": {"0": ["py", "function", "Python function"]}, "titleterms": {"clickhous": [0, 1], "instal": [0, 1, 9, 14], "custom": [0, 1, 12, 14], "port": [0, 1, 12, 14], "us": [0, 1, 12, 14], "extern": [0, 1, 12, 14], "instanc": [0, 1, 12, 14], "exampl": [0, 1, 2, 3, 4, 5, 6, 7, 12, 14, 18], "integr": [0, 1, 7, 12], "databas": [0, 1, 9, 12], "access": [0, 1, 12, 16], "function": [0, 1, 12], "find_schema": [0, 1, 12], "fixtur": [0, 1, 11, 12, 13, 14, 16, 17, 18, 19], "clickhouse_loc": [0, 1], "clickhouse_conn_info": [0, 1], "mark": [0, 1, 12], "pytest": [0, 1, 12], "class": [0, 1, 12, 13, 14, 16, 18], "support": [1, 9], "common": 1, "nofilldb": 1, "mongo": 1, "mongodb": [1, 4], "mongo_connection_info": 1, "mongo_host": 1, "filldb": 1, "postgresql": [1, 6], "reus": 1, "between": 1, "simultan": 1, "session": 1, "pgsql": 1, "pgsql_cleanup_exclude_t": 1, "pgsql_local": 1, "pgsql_local_cr": 1, "mysql": [1, 5, 12], "mysql_loc": [1, 12], "mysql_conninfo": [1, 12], "redi": 1, "rabbitmq": [1, 14], "usag": [1, 14], "run": [2, 9], "docker": [2, 7], "applic": 2, "test": [2, 3, 4, 5, 6, 8], "chat": [3, 4, 5, 6], "backend": [3, 4, 5, 6], "servic": [3, 4, 5, 6, 16], "conftest": [3, 4, 5, 6], "storag": [4, 5, 6], "dockerfil": 7, "compos": 7, "yaml": 7, "testsuit": [8, 9], "microservic": 8, "framework": 8, "indic": 8, "tabl": 8, "overview": 9, "what": 9, "i": 9, "oper": 9, "system": 9, "principl": 9, "sourc": 9, "code": 9, "document": 9, "licens": 10, "http": 11, "mockserv": [11, 18], "mockserver_info": 11, "magic": 11, "arg": 11, "timeout": 11, "network": 11, "error": 11, "opentrac": 11, "other": 13, "plugin": 13, "envinfo": 13, "mocked_tim": 13, "disabl": 13, "api": 15, "refer": 15, "spawn": 16, "service_client_opt": 16, "service_client_default_head": 16, "register_daemon_scop": 16, "ensure_daemon_start": 16, "create_service_cli": 16, "create_daemon_scop": 16, "service_spawn": 16, "work": 17, "static": 17, "file": 17, "lookup": 17, "order": 17, "load": 17, "load_binari": 17, "load_json": 17, "load_yaml": 17, "open_fil": 17, "get_file_path": 17, "get_directory_path": 17, "get_search_path": 17, "static_dir": 17, "initial_data_path": 17, "testsuite_get_source_path": 17, "testsuite_get_source_directori": 17, "tcp": 18, "create_tcp_mockserv": 18, "testpoint": 19, "util": 20, "asynccallqueu": 20}, "envversion": {"sphinx.domains.c": 2, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 8, "sphinx.domains.index": 1, "sphinx.domains.javascript": 2, "sphinx.domains.math": 2, "sphinx.domains.python": 3, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx.ext.intersphinx": 1, "sphinx.ext.todo": 2, "sphinx.ext.viewcode": 1, "sphinx": 57}, "alltitles": {"ClickHouse": [[0, "clickhouse"], [1, "clickhouse"]], "ClickHouse installation": [[0, "clickhouse-installation"], [1, "clickhouse-installation"]], "Customize ports": [[0, "customize-ports"], [1, "customize-ports"], [1, "id27"], [14, "customize-ports"]], "Use external instance": [[0, "use-external-instance"], [1, "use-external-instance"], [1, "id7"], [1, "id17"], [1, "id28"], [12, "use-external-instance"], [14, "use-external-instance"]], "Example integration": [[0, "example-integration"], [1, "example-integration"], [1, "id8"], [1, "id18"], [12, "example-integration"]], "Database access example": [[0, "database-access-example"], [1, "database-access-example"], [1, "id9"], [1, "id19"], [12, "database-access-example"]], "Functions": [[0, "functions"], [1, "functions"], [1, "id11"], [1, "id21"], [12, "functions"]], "find_schemas": [[0, "find-schemas"], [1, "find-schemas"], [1, "id12"], [1, "id22"], [12, "find-schemas"]], "Fixtures": [[0, "fixtures"], [1, "fixtures"], [1, "id3"], [1, "id13"], [1, "id23"], [1, "id30"], [11, "fixtures"], [12, "fixtures"], [13, "fixtures"], [14, "fixtures"], [16, "fixtures"], [17, "fixtures"], [18, "fixtures"], [19, "fixtures"]], "clickhouse": [[0, "id2"], [1, "id24"]], "clickhouse_local": [[0, "clickhouse-local"], [1, "clickhouse-local"]], "clickhouse_conn_info": [[0, "clickhouse-conn-info"], [1, "clickhouse-conn-info"]], "Marks": [[0, "marks"], [1, "marks"], [1, "id4"], [1, "id15"], [1, "id25"], [12, "marks"]], "pytest.mark.clickhouse": [[0, "pytest-mark-clickhouse"], [1, "pytest-mark-clickhouse"]], "Classes": [[0, "classes"], [1, "classes"], [1, "id5"], [1, "id16"], [1, "id26"], [1, "id32"], [12, "classes"], [13, "classes"], [14, "classes"], [16, "classes"], [18, "classes"]], "Database support": [[1, "database-support"]], "Common database marks": [[1, "common-database-marks"]], "pytest.mark.nofilldb": [[1, "pytest-mark-nofilldb"]], "Mongo": [[1, "mongo"]], "mongodb": [[1, "id1"]], "mongo_connection_info": [[1, "mongo-connection-info"]], "mongo_host": [[1, "mongo-host"]], "pytest.mark.filldb": [[1, "pytest-mark-filldb"]], "PostgreSQL": [[1, "postgresql"]], "Customize port": [[1, "customize-port"], [1, "id6"], [12, "customize-port"]], "Reuse database between simultaneous sessions": [[1, "reuse-database-between-simultaneous-sessions"]], "pgsql": [[1, "pgsql"]], "pgsql_cleanup_exclude_tables": [[1, "pgsql-cleanup-exclude-tables"]], "pgsql_local": [[1, "pgsql-local"]], "pgsql_local_create": [[1, "pgsql-local-create"]], "pytest.mark.pgsql": [[1, "pytest-mark-pgsql"]], "MySQL": [[1, "mysql"], [12, "mysql"]], "mysql": [[1, "id14"], [12, "id2"]], "mysql_local": [[1, "mysql-local"], [12, "mysql-local"]], "mysql_conninfo": [[1, "mysql-conninfo"], [12, "mysql-conninfo"]], "pytest.mark.mysql": [[1, "pytest-mark-mysql"], [12, "pytest-mark-mysql"]], "Redis": [[1, "redis"]], "RabbitMQ": [[1, "rabbitmq"], [14, "rabbitmq"]], "RabbitMQ installation": [[1, "rabbitmq-installation"], [14, "rabbitmq-installation"]], "Usage example": [[1, "usage-example"], [14, "usage-example"]], "rabbitmq": [[1, "id31"], [14, "id2"]], "Examples": [[2, "examples"], [2, "id1"]], "Running examples": [[2, "running-examples"]], "Running examples in docker": [[2, "running-examples-in-docker"]], "Run application": [[2, "run-application"]], "Run tests": [[2, "run-tests"]], "Chat backend example": [[3, "chat-backend-example"]], "Chat backend service": [[3, "chat-backend-service"]], "Conftest": [[3, "conftest"], [4, "conftest"], [5, "conftest"], [6, "conftest"]], "Test": [[3, "test"], [4, "test"], [5, "test"], [6, "test"]], "MongoDB chat storage backend example": [[4, "mongodb-chat-storage-backend-example"]], "Example Service": [[4, "example-service"], [5, "example-service"], [6, "example-service"]], "MySQL chat storage backend example": [[5, "mysql-chat-storage-backend-example"]], "PostgreSQL chat storage backend example": [[6, "postgresql-chat-storage-backend-example"]], "Docker integration example": [[7, "docker-integration-example"]], "Dockerfile": [[7, "dockerfile"]], "docker-compose.yaml": [[7, "docker-compose-yaml"]], "testsuite: microservice testing framework": [[8, "testsuite-microservice-testing-framework"]], "Indices and tables": [[8, "indices-and-tables"]], "Overview": [[9, "overview"]], "What is testsuite": [[9, "what-is-testsuite"]], "Installation": [[9, "installation"]], "Supported databases": [[9, "supported-databases"]], "Supported operating systems": [[9, "supported-operating-systems"]], "Principle of operation": [[9, "principle-of-operation"]], "Source code": [[9, "source-code"]], "Documentation": [[9, "documentation"]], "Running testsuite": [[9, "running-testsuite"]], "License": [[10, "license"]], "Http mockserver": [[11, "http-mockserver"]], "mockserver": [[11, "mockserver"]], "mockserver_info": [[11, "mockserver-info"]], "Magic args": [[11, "magic-args"]], "Timeouts and network errors": [[11, "timeouts-and-network-errors"]], "OpenTracing": [[11, "opentracing"]], "Other plugins": [[13, "other-plugins"]], "Envinfo": [[13, "envinfo"]], "Mocked_time": [[13, "mocked-time"]], "Disabling mocked_time": [[13, "disabling-mocked-time"]], "API reference": [[15, "api-reference"]], "Spawning and accessing service": [[16, "spawning-and-accessing-service"]], "service_client_options": [[16, "service-client-options"]], "service_client_default_headers": [[16, "service-client-default-headers"]], "register_daemon_scope": [[16, "register-daemon-scope"]], "ensure_daemon_started": [[16, "ensure-daemon-started"]], "create_service_client": [[16, "create-service-client"]], "create_daemon_scope": [[16, "create-daemon-scope"]], "service_spawner": [[16, "service-spawner"]], "Working with static files": [[17, "working-with-static-files"]], "Static file lookup order": [[17, "id1"]], "load": [[17, "load"]], "load_binary": [[17, "load-binary"]], "load_json": [[17, "load-json"]], "load_yaml": [[17, "load-yaml"]], "open_file": [[17, "open-file"]], "get_file_path": [[17, "get-file-path"]], "get_directory_path": [[17, "get-directory-path"]], "get_search_pathes": [[17, "get-search-pathes"]], "static_dir": [[17, "static-dir"]], "initial_data_path": [[17, "initial-data-path"]], "testsuite_get_source_path": [[17, "testsuite-get-source-path"]], "testsuite_get_source_directory": [[17, "testsuite-get-source-directory"]], "Tcp mockserver": [[18, "tcp-mockserver"]], "Example": [[18, "example"]], "create_tcp_mockserver": [[18, "create-tcp-mockserver"]], "Testpoint": [[19, "testpoint"]], "Utils": [[20, "utils"]], "AsyncCallQueue": [[20, "asynccallqueue"]]}, "indexentries": {"built-in function": [[1, "pytest.mark.nofilldb"]], "pytest.mark.filldb() (in module testsuite.databases.mongo.pytest_plugin)": [[1, "testsuite.databases.mongo.pytest_plugin.pytest.mark.filldb"]], "pytest.mark.nofilldb()": [[1, "pytest.mark.nofilldb"]], "pytest.mark.pgsql() (in module testsuite.databases.pgsql.pytest_plugin)": [[1, "testsuite.databases.pgsql.pytest_plugin.pytest.mark.pgsql"]], "create_daemon_scope() (in module testsuite.daemons.pytest_plugin)": [[16, "testsuite.daemons.pytest_plugin.create_daemon_scope"]], "create_service_client() (in module testsuite.daemons.pytest_plugin)": [[16, "testsuite.daemons.pytest_plugin.create_service_client"]], "get_directory_path() (in module testsuite.plugins.common)": [[17, "testsuite.plugins.common.get_directory_path"]], "get_file_path() (in module testsuite.plugins.common)": [[17, "testsuite.plugins.common.get_file_path"]], "get_search_pathes() (in module testsuite.plugins.common)": [[17, "testsuite.plugins.common.get_search_pathes"]], "load() (in module testsuite.plugins.common)": [[17, "testsuite.plugins.common.load"]], "load_binary() (in module testsuite.plugins.common)": [[17, "testsuite.plugins.common.load_binary"]], "load_json() (in module testsuite.plugins.common)": [[17, "testsuite.plugins.common.load_json"]], "load_yaml() (in module testsuite.plugins.common)": [[17, "testsuite.plugins.common.load_yaml"]], "open_file() (in module testsuite.plugins.common)": [[17, "testsuite.plugins.common.open_file"]], "testsuite_get_source_directory() (in module testsuite.plugins.common)": [[17, "testsuite.plugins.common.testsuite_get_source_directory"]], "testsuite_get_source_path() (in module testsuite.plugins.common)": [[17, "testsuite.plugins.common.testsuite_get_source_path"]], "create_tcp_mockserver() (in module testsuite.plugins.tcp_mockserver)": [[18, "testsuite.plugins.tcp_mockserver.create_tcp_mockserver"]]}})